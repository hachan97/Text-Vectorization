Washington (CNN) US officials are taking a two-track approach to the Iran nuclear deal, negotiating with allies to make changes demanded by President Donald Trump even as they prepare to walk away from the international agreement.

Trump set a May 12 deadline -- the next date by which he has to waive sanctions against Iran or leave the deal -- for the US and its European allies to agree on changes to address what he sees as its flaws.

The President's thinking, officials say, is that if the US and Europe are united on amending the deal, the other signatories -- Russia and China -- will come along, and Iran will have no choice but to comply.

Critics argue that leaving the deal would damage relations with European allies, harm US national security interests -- in part by reducing the US' ability to monitor Iran's nuclear activities -- and send a clear message to North Korea that the US can't be trusted to honor nuclear agreements.

European allies say they will not consider changes to the agreement but the gulf between the allies and the US is vast. With the President himself dismissing the deal as "terrible," and the impending move of CIA Director Mike Pompeo, an Iran hawk, to the State Department, many officials in the US and Europe are bracing for Washington to abandon the agreement.

Against that backdrop, US officials leading the negotiations with European allies say that at the same time, they are readying contingency plans should Trump decide to pull the US out.

"We always have to prepare for any eventuality. We are engaged in contingency planning. .... We're kind of dual tracking this," said Brian Hook, the State Department's director of policy planning, who is leading talks with the Europeans.

The Treasury Department, meanwhile, is preparing for the possibility that it may have to "snap back" sanctions that were repealed by the Obama administration after the deal, formally known as the Joint Commission Plan of Action, was signed.

Hook met with European allies in Berlin last week to continue discussions before going to Vienna, Austria, on Friday for a regular meeting with all parties to the agreement.

Asked whether he was confident about reaching an agreement with the Europeans, Hook said Wednesday that, "we have had constructive talks with the Europeans ... but I can't predict if we will reach a deal or not."

"We have a goal in mind, and we will either reach agreement or we won't," Hook said. He admitted that Iran is "in technical compliance to their commitments" under the deal.

Hook declined to comment on how Pompeo's transfer would affect prospects for the Iran deal, but said he expected the former congressman from Kansas to make an easy transition. "A number of us are providing assistance to Secretary-designate Pompeo's confirmation process," Hook said. "He's got such a deep familiarity with so many of these issues that it will be a very easy transition."

Trump wants the Iran pact amended with a supplemental agreement that would end so-called "sunset clauses" -- provisions that wind down after a few years -- intensify the inspections of Iran's nuclear sites and add measures covering Iran's ballistic missile program.

Separately, Trump also wants allies to take more steps to address Tehran's presence in Lebanon, its backing for Hezbollah, cyberattacks and "maritime aggression," as well as the powerful Islamic Revolutionary Guard Corps, which the US says is behind much of the Mideast's destabilization.

"I have outlined two possible paths forward: Either fix the deal's disastrous flaws, or the United States will withdraw," Trump said on January 12, the last time he waived sanctions. At the time, the President said he was waiving sanctions only to give Europeans time to come to an agreement with the US.

Lawmakers say they think Trump will walk away. "I think the President likely will move away from it, unless my, our European counterparts really come together on a framework," Sen. Bob Corker, the Tennessee Republican who heads the Foreign Relations Committee, said March 18 on CBS' "Face The Nation." "And it doesn't feel to me that they are."

Indeed, European officials say that while they're happy to discuss measures to pressure Iran on its activities in the Mideast, they aren't willing to consider a supplemental to the nuclear deal. And Iran refuses to discuss reopening the negotiations, which took years to complete.

A source familiar with the US-European negotiations told CNN there has been "good progress" on missile and inspection issues, but a key sticking point remains the US demand to eliminate sunset clauses. The source said the White House doesn't believe that a withdrawal from the deal is inevitable, but is "increasingly likely."

Hook said Wednesday that in the context of nonproliferation agreements or treaties, it's "very common to add supplemental agreements," though he noted that the nuclear pact is not a treaty, but simply a political agreement.

"It's sui generis nonproliferation plan of action that's a political document," Hook said. "And this is an agreement that has many deficiencies. We think that these deficiencies are of such threats to national security that we can't allow the deal to remain in place without a supplemental agreement to address its deficiencies. And so that's our focus there."

Hook also sidestepped a question about whether leaving the Iran nuclear deal would send a message to North Korea that the US can't be trusted. "No one has negotiated in more bad faith than North Korea. They have a history of noncompliance," Hook said.

Military leaders have been clear about the strategic downsides of leaving the pact.

Asked about the message North Korea could draw if Trump abrogates the Iran deal, Gen. John Hyten, the commander of US Strategic Command, told the Senate Armed Services Committee on Tuesday that, "any action the United States takes sends a message around the planet, so it will send a message to North Korea, it will send a message to Russia, China, our allies, Iran, Saudi Arabia, everybody is impacted."

Close US allies have been critical of the deal as it's structured. Saudi Foreign Minister Adel al-Jubeir said Tuesday that it's a "flawed agreement" and warned that because Iran is able to continue its nuclear research, there's a chance that when the deal expires, it will be able to enrich enough uranium for a bomb "within weeks."

That said, al-Jubeir told reporters in Washington this week that if the changes Trump is asking for can be made, Saudi Arabia would be able to support the deal.