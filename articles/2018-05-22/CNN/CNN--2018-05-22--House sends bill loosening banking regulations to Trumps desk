And now a Republican bill that offers the most sweeping changes to rules crafted following the 2008 financial crisis is now headed to his desk for his signature.

In a final step on Tuesday, the House voted 258-159 in favor of a bipartisan Senate-crafted bill aimed at loosening regulations for thousands of community banks and regional lenders, including State Street, BB&T and SunTrust.

Its passage marks the end of years of lobbying by the financial industry to soften post-crisis rules and tense negotiations in Congress to win bipartisan support for the bill.

Democrats who supported the bill crafted by Senate Banking Committee Chairman Mike Crapo, an Idaho Republican, have drawn backlash from more progressive members of the party, who argue that a regulatory rollback would make the financial system more vulnerable to another crisis.

Massachusetts Democratic Sen. Elizabeth Warren, who opposed the bill, wrote on Twitter after it passed the Senate in March that "bankers are popping champagne." Ahead of the House vote, House Democratic leader Nancy Pelosi and Maxine Waters, the top Democrat on the House Financial Services Committee, urged their colleagues not to the vote in favor of the bill. "We must not allow the GOP Congress to drag us back to the same oversight that ignited the Great Recession," they wrote to Democratic colleagues this week. House GOP leaders agreed earlier this month to proceed with a vote after striking a deal with the Senate counterparts. In exchange for bringing it to the floor for a House vote, Senate leaders would press ahead with a companion package of bills supported by House Financial Services Committee Chairman Jeb Hensarling, a Texas Republican. Hensarling wanted to add a number of measures to the Senate bill. One would ease disclosure requirements for banks on mortgage loans. Another would allow more companies to file confidential IPOs without divulging all their sensitive financial information right away. But any changes in the House would send the bill back to the Senate. And moderate Senate Democrats, whose support was critical in advancing the banking bill, have said they won't vote on the bill twice. For years, small and regional banks have claimed regulations under Dodd-Frank have hurt their ability to lend and help stimulate the economy. The legislation will now provide smaller financial institutions with relief from the same set of strict rules as behemoth Wall Street banks. But there are fewer wins for the country's biggest banks whose failure could endanger the entire financial system if they go under. Top bank regulators agree fixes should be made for community banks. Among the fixes proposed include raising the threshold at which banks are considered "too big to fail." That trigger, now set at $50 billion in assets, will rise to $250 billion. That would leave only a dozen US banks  including JPMorgan Chase, Bank of America and Wells Fargo  facing the strictest regulations by the Federal Reserve. But those two dozen midsize regional banks will no longer have to hold as much capital to cover losses on their balance sheets. They will not be required to have plans in place to be safely dismantled if they failed. And they will have to take the Fed's bank health test only periodically, not once a year. It will also loosen regulations for mortgage lenders, expand access to free credit freezes for Americans who are worried about identity theft, and change the rules for student loan defaults. Community banks with less than $10 billion in assets will no longer have to comply with the so-called Volcker Rule . The rule bars financial institutions from making risky bets with money that is insured by taxpayers. The reporting agencies Equifax, Experian and TransUnion will also be required to freeze and unfreeze Americans' credit reports for free. That would be a reprieve for millions of Americans whose data was exposed in the breach of Equifax, disclosed last year.