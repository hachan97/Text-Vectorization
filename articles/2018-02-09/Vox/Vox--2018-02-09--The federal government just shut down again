The federal government just technically shut down again, for the second time in three weeks.

At 12:01 am on Friday, the governments funding ran out and Congress had failed to pass a new spending bill. The Senate will vote by 1 am at the latest to take up a short-term spending deal to fund the government through most of March, paired with a larger budget deal that would set government spending levels for the next two years.

Sen. Rand Paul (R-KY) effectively shut down the government himself, at least for a few hours. Hes angry over the new deal negotiated by congressional leaders that would bust the government budget caps that have been in place since 2013.

To pass a bill before the government shut down at midnight, Senate leaders needed the agreement of every senator. But Paul withheld his consent, angling for a vote on his amendment that would instead preserve the so-called sequestration budget caps. He didnt get it.

Under the Senate rules, the chamber can start voting at 1 am  with or without Paul. The short-term spending and long-term budget package is expected to receive broad support in the Senate.

But the plan is on unsure ground in the House too. Archconservatives are abandoning the bill for its domestic spending increases. Many House Democrats  whose votes will be needed  have been digging in against the plan, too, trying to secure assurances that the lower chamber will advance an immigration bill in the coming weeks to protect people who were brought to the country illegally as children. But for now, the general expectation is the House will find the votes to pass the spending and budget bill.

In January, the government shut down for three days. Its not clear yet how long this second shutdown will last: It could be just a few hours, if the House does pass the spending bill shortly. Or it could drag on if enough Democrats and right-wing Republicans abandon it.

Voxs Tara Golshan ran through the particulars of the spending deal that Senate leaders announced earlier this week. It would fund the government through March 23, to give congressional staff the time to write bigger appropriations bills that would actually fund the federal government for the next two years, under the parameters laid out in the budget deal that Congress is about to pass at the same time.

On Wednesday, Senate Majority Leader Mitch McConnell and Minority Leader Chuck Schumer announced a deal on budget caps that would increase investments in domestic programs and the military by roughly $300 billion over the next two years: The deal lifts funding for domestic programs by $128 billion and hikes defense budgets by $160 billion. This agreement is the result of a fight that goes back to 2011 when an Obama-era impasse over the debt ceiling brought the American economy to near calamity, which ultimately resulted in the 2013 sequester, setting into law across-the-board budget cuts and establishing budget caps that would amount to $1.2 trillion in cuts over the next 10 years.

This is what Paul, one of the Senates foremost budget hawks, opposes. He believes the spending caps should be kept because federal spending is already too high.

He is one of only a few who feel that way  even many conservatives want to bust the budget caps for the military  and Senate leadership apparently didnt feel it needed to give Paul a vote on his desired amendment, opting instead to let the government momentarily shut down and run out the clock.

The deal also includes a bunch of other goodies, particularly for federal health care programs and the states and territories ravaged by hurricanes last year. The legislation would:

The deal would take a number of lingering issues off the table  with the 10-year CHIP extension, major disaster relief, and community health center funding in particular  and should clear Congresss plate for much of the rest of 2018, an election year.

But both House Democrats and conservative Republicans are threatening to withhold support for a vote thats a few hours away.

For conservative Republicans, the budget deal, which McConnell and Schumer announced Wednesday, is too massive a spending increase. The proposal would increase investments in domestic programs and the military to the tune of $300 billion over the next two years, a major victory for Democrats concerned that a Republican-led government would slash federal programs.

But some Democrats are engaging in a high-risk, last-ditch strategy to ensure the House actually votes on immigration. With enough conservatives voting against the budget proposal, House Republicans need Democratic support to keep the government open. Despite supporting the budget deal on its merits, many House Democrats say they need a promise on a DACA vote as hundreds of thousands of young immigrants fear losing protections from deportation and work permits by March 5.

The story changed throughout the day, with different leaders giving different instructions. Around 5 pm, Rep. Luis Gutierrez (D-IL), a leader on immigration issues, downplayed the shutdown talk. Sometimes there are whip operations where there are dire consequences for voting no, he told reporters. This whip operation is just informational. Its, How ya feeling?

On its face, its hard to parse Democratic leaders strategy here. Immigration activists have backed off calls for another government shutdown over DACA, especially after many saw the three-day shutdown in late January to be lacking much forethought.

But after months of stalled bipartisan immigration negotiations, and a clear lack of urgency from Republican leadership, Democrats are trying to hold House Speaker Paul Ryans feet to the fire.

Whether they have the stomach for another shutdown will become clear in the next few hours.