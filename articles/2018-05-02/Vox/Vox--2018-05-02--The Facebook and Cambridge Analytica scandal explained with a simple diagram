Cambridge Analytica, the political consulting firm that did work for the Trump campaign and harvested raw data from up to 87 million Facebook profiles, is shutting down.

There is a complicated web of relationships that explains how the Trump campaign, Cambridge Analytica, and Facebook are tied together, as my colleague Andrew Prokop explains in this excellent piece.

But if you need a refresher on how all the pieces fit together, this diagram helps make sense of it all.

Facebook exposed data on up to 87 million Facebook users to a researcher who worked at Cambridge Analytica, which worked for the Trump campaign.

Cambridge Analytica was created when Steve Bannon approached conservative megadonors Rebekah and Robert Mercer to fund a political consulting firm. Bannon became vice president of Cambridge Analytica, and during the 2016 election, he reached out to the Trump campaign to introduce the two sides.

Bannon, of course, eventually became a senior adviser to Trump before he was fired in August 2017.

So what is the SCL Group, which does the work for Cambridge Analytica? Its a public relations and messaging firm that has clients all around the world, and as Voxs Andrew Prokop writes:

This means, as the New York Times writes, Cambridge Analytica is basically a shell for the SCL Group.

Cambridge Analytica CEO Alexander Nix actually reached out to WikiLeaks founder Julian Assange about the emails that were hacked from the Democratic National Committees servers, according to the Wall Street Journal.

But the more important part of this story is how Cambridge Analytica got its data from Facebook. And according to a former Cambridge Analytica employee, the firm got it through researcher Aleksandr Kogan, a Russian American who worked at the University of Cambridge.

It not only collected data from people who took the quiz, but as my colleague Aja Romano writes, it exposed a loophole in Facebook API that allowed it to collect data from the Facebook friends of the quiz takers as well.

As Romano points out, Facebook prohibited the selling of data collected with this method, but Cambridge Analytica sold the data anyway.

Facebook founder and CEO Mark Zuckerberg wrote in a response to this scandal, Ive been working to understand exactly what happened and how to make sure this doesnt happen again. The good news is that the most important actions to prevent this from happening again today we have already taken years ago. But we also made mistakes, theres more to do, and we need to step up and do it.

But former Facebook employees have said that theres a tension between the security team and the legal/policy team in terms of how they prioritize user protection in their decision-making.

The people whose job is to protect the user always are fighting an uphill battle against the people whose job is to make money for the company, Sandy Parakilas, who worked on the privacy side at Facebook, told the New York Times.

Now, there is a decent chance Cambridge Analyticas work didnt actually do much to elect Trump; the firms reputation in the political consulting community is less than stellar.

But this highlights a larger debate over how much users can trust Facebook with their data. Facebook allowed a third-party developer to engineer an application for the sole purpose of gathering data. And the developer was able to exploit a loophole to gather information on not only people who used the app but all their friends  without them knowing.

Still, its Cambridge Analytica paying the price today after losing multiple clients after the last several months of unflattering publicity.